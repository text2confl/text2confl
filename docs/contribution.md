# Contributing to codebase

# Adding support for Confluence formatting features

Wiki pages are stored in Confluence in special xml-like format that is called "storage format".

If you find some Confluence formatting feature missing and would like to add them, here is the recommended steps to
take.

1. Check [Confluence storage format](https://confluence.atlassian.com/doc/confluence-storage-format-790796544.html)
   documentation. It's a reference guide for basic functionality like text styling or embedding images on page that
   describe how all these basics should be represented in storage format
2. Go to WYSIWYG editor and write there desired content after that save page and view it in storage format. Such an
   option is available in page options
3. Now find the place in code to adjust (or add if this is something new) and transform AST node to proper storage
   format content

# Enhancing communication with Confluence API

Rest api reference for confluence - <https://docs.atlassian.com/atlassian-confluence/REST/6.6.0/>. It is for confluence
server, but it works for cloud as well.

# Asciidoc

Adapting existing asciidoc feature to Confluence requires analysis of how it is generated by default and then finding
appropriate way to generate Confluence storage format.

Location of code that generates standard html for
asciidoc: `<asciidoctor-gem-location>/lib/asciidoctor/converter/html5.rb`

Steps:

1. Find `convert_xxx` method, where `xxx` is the name of feature you need.
2. Analyze code and decide what you want to do differently
3. Create template in `convert/src/main/resources/com/github/zeldigas/text2confl/asciidoc`. For block name it should be
   named `block_xxx.html.slim`, for inline content - `inline_xxx.html.slim`
4. In created file, you need to specify generate structure using [slim template](https://slim-template.github.io/)
