# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/), and this project adheres
to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## Unreleased

## 0.6.0

### Changed

* Updated dependencies: kotlin 1.7, ktor 2.1, latest jackson

### Added

* Added check that converted file is a valid xml before trying to upload content to server
* Support for emoji text-codes using :metal:

## 0.5.1 - 2022-04-02

### Fixed

* Symlink to command was missing in PATH of docker image

## 0.5.0 - 2022-04-02

### Added

* \[Markdown] Support for any Confluence macros with simple key-value parameters. Ref with format `[MACRONAME param1=value1]`
  will insert `macroname` macros with one parameter `param1` (#20).

## 0.4.2 - 2022-03-26

### Fixed

* Don't fail when modifying/deleting attachment in Confluence Server (#18)
* \[Markdown] User reference now supports `-` symbol in the middle of username, e.g. `~user-name` (#21)

### Changed

* Cleanup of orphaned pages is done in parallel to reduce execution time

## 0.4.1 - 2022-03-14

### Fixed

* Now labels from confluence server associated with page deserialized properly (#16)

## 0.4.0 - 2022-03-13

### Changed

* \[Markdown] Missing TOC properties are supported now: `outline`
* \[Markdown] TOC parameters can be specified in `[TOC]` block.

### Fixed

* Orphaned pages are now detected in root parents and leaf pages. Parent page is also properly tracked as now real
  parent is used instead of *default parent* (because every page can configure parent in attributes).

## 0.3.0 - 2022-03-07

### Added

* Ability to add autogenerated note block with parametrized text that by defaults point to source file location.
* `convert` command now takes into account parameters from `.text2conf.yml` file
* Support for orphaned child pages removal using 2 strategies:
    * `managed` (default) - to remove pages only created by `text2confl` itself. It is good to clear dangling pages
      after rename while allowing humans to maintain pages under generated ones
    * `all` - to remove all child pages. It is good if you want to enforce policy that all pages should be managed in
      code
* Support for dry run upload - no modifications will be done. Instead, potential actions will be logged with (dryrun)
  marker

### Fixed

* Updating page labels when page on server does not have any label

## 0.2.0 - 2022-02-12

### Added

* Ability to override parent via page attributes. This can be handy for use-cases when root pages do not belong to
  single parent
* \[Markdown] Support for status macro via custom html tag: `<status color="red">STATUS text</status>`
* \[Markdown] Support for confluence username reference (`@username`)
* \[Markdown] Support for ^superscript^ text

### Fixed

* \[Confluence Cloud] Creation of page - turns out cloud version sets editor property on page creation, so call to
  create this property fails
* \[Confluence Cloud] Fixed line soft wraps. Editor v2 does paragraph breaks on soft wraps that is undesirable
* Space details resolution used hardcoded space key, now provided key is used properly

## 0.1.0 - 2022-02-06

Initial release of application.

### Added

* Uploading to confluence with username/password and access tokens
* Parallel upload of pages to reduce time
* Support for editor v1 and v2. Uploaded page is marked accordingly
* Support for files in Markdown format with the following features specific to Confluence
    * Table of Contents
    * Task lists
    * Admonitions (tip, note, warning, info blocks)
    * Attachments
